namePrefix: '{{ include "chart.fullname" . }}-'

namespace: '{{ .Release.Namespace | quote }}'

generatorOptions:
  disableNameSuffixHash: true

images:
- name: ghcr.io/cndoit18/lxcfs-manager:dev
  newName: '{{.Values.image.repository}}'
  newTag: '{{.Values.image.tag|default .Chart.AppVersion}}'
- name: ghcr.io/cndoit18/lxcfs-agent:dev
  newName: '{{.Values.image.agentImage}}'
  newTag: '{{.Values.image.tag|default .Chart.AppVersion}}'

patches:
- patch_deployment_config.yaml
- patch_deployment_webhook.yaml

patchesJson6902:
- target:
    version: v1
    group: apps
    kind: Deployment
    name: controller-manager
  path: patch_deployment_metadata.yaml
- target:
    version: v1
    group: apps
    kind: Deployment
    name: controller-manager
  path: patch_deployment_resources.yaml
- target:
    version: v1
    group: apps
    kind: Deployment
    name: controller-manager
  path: patch_deployment_security.yaml

bases:
- ../../manager
